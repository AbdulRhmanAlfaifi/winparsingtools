use winparsingtools::{date_time::{DosDateTime, FileTime}, file_system::{
        FileAttributesFlags,
        FileReference
    }, structs::ExtraDataBlock, structs::StringData, structs::shell_items::ShellItem};
#[test]
fn filetime_test() {
    let a = FileTime::new(132516443881399495);
    assert!(format!("{}",a).eq("2020-12-05T12:19:48Z"));
    println!("{}",a);
}

#[cfg(test)]
#[test]
fn file_attributes_flags_test() {
    println!("{:?}\n",FileAttributesFlags::from_u32(32));
}

#[cfg(test)]
#[test]
fn extra_data_block_test() {
    let extra_data_block: &[u8] = &[
    0x42, 0x00, 0x09, 0x00, 0x04, 0x00, 0xEF, 0xBE, 0x85, 0x51, 0x79, 0x62, 0x85, 0x51, 0x79, 0x62,
    0x2E, 0x00, 0x00, 0x00, 0x26, 0x74, 0x02, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x39, 0xD2, 0x1B, 0x01, 0x74, 0x00,
    0x65, 0x00, 0x73, 0x00, 0x74, 0x00, 0x2E, 0x00, 0x74, 0x00, 0x78, 0x00, 0x74, 0x00, 0x00, 0x00,
    0x18, 0x00];
    println!("{:?}\n",ExtraDataBlock::from_buffer(&extra_data_block).unwrap());
}

#[cfg(test)]
#[test]
fn file_reference_test() {
    let file_ref: &[u8] = &[0x26, 0x74, 0x02, 0x00, 0x00, 0x00, 0x08, 0x00];
    println!("{:?}\n",FileReference::from_buffer(&file_ref).unwrap());
}

#[cfg(test)]
#[test]
fn shell_items_test() {
    let shell_item_data: &[u8] = &[
        0x5A, 0x00, 0x32, 0x00, 0x00, 0x00, 0x00, 0x00, 0x85, 0x51, 0x79, 0x62, 0x20, 0x00, 0x74, 0x65,
        0x73, 0x74, 0x2E, 0x74, 0x78, 0x74, 0x00, 0x00, 0x42, 0x00, 0x09, 0x00, 0x04, 0x00, 0xEF, 0xBE,
        0x85, 0x51, 0x79, 0x62, 0x85, 0x51, 0x79, 0x62, 0x2E, 0x00, 0x00, 0x00, 0x26, 0x74, 0x02, 0x00,
        0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x39, 0xD2, 0x1B, 0x01, 0x74, 0x00, 0x65, 0x00, 0x73, 0x00, 0x74, 0x00, 0x2E, 0x00,
        0x74, 0x00, 0x78, 0x00, 0x74, 0x00, 0x00, 0x00, 0x18, 0x00 
    ];
    println!("{:?}\n",ShellItem::from_buffer(&shell_item_data).unwrap());
}

#[cfg(test)]
#[test]
fn string_data_test() {
    let string_data: &[u8] = &[
        0x0A, 0x00, 0x2E, 0x00, 0x5C, 0x00, 0x74, 0x00, 0x65, 0x00, 0x73, 0x00, 0x74, 0x00, 0x2E, 0x00,
        0x74, 0x00, 0x78, 0x00, 0x74, 0x00
    ];

    println!("{}\n",StringData::from_buffer(&string_data).unwrap());
}


#[cfg(test)]
#[test]
fn dos_date_time_test() {
    println!("{}\n",DosDateTime::from_u32(2583122118).unwrap());
}
